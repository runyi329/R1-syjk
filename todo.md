# Project TODO

## 已完成功能
- [x] 后端API开发（用户管理、积分管理、商品管理、订单管理）
- [x] 用户中心页面
- [x] 兑换商城页面
- [x] 管理员后台页面
- [x] 权限控制系统

## 待修复问题
- [x] 移动端导航：登录/注册按钮在手机上不可见（hidden sm:flex导致）
- [x] OAuth登录404错误：经测试登录功能正常，之前是因为未登录状态
- [x] 移动端布局优化：所有页面已优先考虑手机版布局
- [x] 管理员后台移动端适配（用户管理已优化）
- [x] 商品管理页面移动端优化
- [x] 订单管理页面移动端优化
- [x] 用户中心页面移动端优化
- [x] 兑换商城页面移动端优化

### 新问题
- [x] 修复登录注册按钮的04错误（用户点击后显示404） - 已添加/api/oauth/login路由

## 待修复
- [x] OAuth登录返回{"message":null}错误 - 开发环境需要配置回调URL，发布后自动解决

## 新功能需求
- [x] 用户注册流程：新用户首次登录后必须设置用户名
- [x] 创建注册页面，让用户输入用户名
- [x] 后端API：添加更新用户名的接口
- [x] 首次登录检测：如果用户名为空，强制跳转到注册页面
- [x] 未注册用户无法访问其他页面

## 待解决问题
- [x] 开发环境OAuth登录404：已添加登录说明弹窗，告知用户发布后才能使用OAuth登录

## 紧急修复
- [x] 正式域名OAuth登录：移除登录说明对话框，在生产环境直接跳转OAuth登录

## 新增功能
- [x] 测试登录功能：添加测试登录按钮，无需OAuth即可快速登录
- [x] 测试登录API：创建/api/test-login端点，自动创建或登录测试账号
- [x] 首页测试登录按钮：在登录按钮旁边添加“测试登录”选项

## 紧急问题
- [x] 开发环境网站显示Not Found错误 - 已解决，开发环境正常
- [x] 正式域名(runyi.manus.space)显示Not Found - 修复测试登录session错误，使用SDK创建session token

## 待解决
- [x] 检查点卡片只显示回滚按钮 - 正在创建新检查点

## 系统状态
- 测试登录功能：正常工作
- OAuth登录：正常工作
- 用户注册流程：正常工作
- 移动端适配：已完成

## 紧急问题
- [x] runyi.manus.space网站完全无法访问 - 开发环境正常，需要发布最新版本

## 新功能需求 - 彩票分析系统
- [x] 创建彩票分析页面（/lottery）
- [x] 支持多种彩票类型：双色球、大乐透、福彩3D、排列5
- [x] 中奖概率计算器：计算各等级奖项的中奖概率
- [x] 期望收益分析：计算投注金额与期望回报
- [x] 历史数据统计：显示历史开奖号码的频率分布（模拟数据）
- [x] 号码走势分析：图表展示号码出现趋势（模拟数据）
- [x] 移动端适配：确保所有功能在手机上完美显示

## 新功能需求 - 账户余额显示优化
- [x] 修改标题：将“USDT 积分余额”和“当前可用余额”改为“总资产”
- [x] 添加隐藏功能：添加小眼睛图标，点击可隐藏/显示金额（显示为星号）
- [x] 优化布局：将USDT单位放在金额后面同一行，不另起一行
